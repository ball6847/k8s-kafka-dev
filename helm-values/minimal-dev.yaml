# Bitnami Kafka Helm Chart - Minimal Development Configuration
# This configuration is optimized for local development with minimal resource usage

# Global settings
global:
  storageClass: ""

# Kafka configuration
kafka:
  # Resource requests and limits (minimal for development)
  resources:
    requests:
      cpu: 250m
      memory: 1Gi
    limits:
      cpu: 1
      memory: 2Gi

  # Heap size settings (reduced for minimal setup)
  heapOpts: "-Xmx1024m -Xms1024m"

  # Persistence disabled for minimal setup
  persistence:
    enabled: false
    size: 8Gi

  # Kafka configuration
  config: |
    # Basic Kafka configuration for development
    offsets.topic.replication.factor=1
    transaction.state.log.replication.factor=1
    transaction.state.log.min.isr=1
    default.replication.factor=1
    min.insync.replicas=1
    
    # Reduce log segment size for faster testing
    log.segment.bytes=67108864
    
    # Reduce log retention for development
    log.retention.hours=168
    log.retention.bytes=1073741824

  # Listeners configuration
  listeners:
    client:
      containerPort: 9092
      protocol: PLAINTEXT
      name: CLIENT
    controller:
      name: CONTROLLER
      containerPort: 9093
      protocol: PLAINTEXT
    interbroker:
      containerPort: 9094
      protocol: PLAINTEXT
      name: INTERNAL
    external:
      containerPort: 9095
      protocol: PLAINTEXT
      name: EXTERNAL

  # Service configuration
  service:
    type: ClusterIP
    ports:
      client: 9092

# ZooKeeper configuration (disabled - using KRaft mode)
zookeeper:
  enabled: false

# KRaft mode settings - MINIMAL CONFIGURATION
kraft:
  enabled: true

# Controller configuration - MINIMAL (combine controller+broker in same pods)
controller:
  replicaCount: 1             # Only 1 controller pod
  controllerOnly: false       # Make it controller+broker (combined mode)

# Broker configuration - DISABLED (using combined controller+broker mode)
broker:
  replicaCount: 0             # No separate broker pods needed

# External access (optional - uncomment if needed)
externalAccess:
  enabled: false
  service:
    type: NodePort
    ports:
      external: 9094
  autoDiscovery:
    enabled: false

# Metrics and monitoring (disabled for minimal setup)
metrics:
  kafka:
    enabled: false
  jmx:
    enabled: false

# ServiceMonitor for Prometheus (disabled)
serviceMonitor:
  enabled: false

# Volume permissions (not needed without persistence)
volumePermissions:
  enabled: false

# Init containers (minimal)
sysctlImage:
  enabled: false

# Log configuration
logPersistence:
  enabled: false
